<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="http://schemas.devexpress.com/winfx/2008/xaml/map" xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">
  <DataTemplate x:Key="multiScaleTileImage">
    <local:MultiScaleImage x:Name="PART_MapImage" UseSprings="False" Source="{Binding Path=DataProvider.ImageSource, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" CacheOptions="{Binding Path=DataProvider.CacheOptions, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" TileCacheNamePrefix="{Binding Path=DataProvider.TileCacheNamePrefix, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" Layer="{Binding RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" />
  </DataTemplate>
  <DataTemplate x:Key="multiScaleWmsImage">
    <local:MultiScaleWmsImage x:Name="PART_MapImage" UseSprings="False" Source="{Binding Path=DataProvider.ImageSource, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" Image="{Binding Path=DataProvider.ImageSource.Image, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" ContextProvider="{Binding Path=DataProvider,RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" Layer="{Binding RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" />
  </DataTemplate>
  <DataTemplate x:Key="multiScaleTileImageBase">
    <local:MultiScaleImage x:Name="PART_MapImage" UseSprings="False" Source="{Binding Path=DataProvider.ImageSource, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" Layer="{Binding RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" />
  </DataTemplate>
  <DataTemplate x:Key="multiScaleHeatImage">
    <local:MultiScaleHeatImage x:Name="PART_MapImage" UseSprings="False" Source="{Binding Path=DataProvider.ImageSource, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" Image="{Binding Path=DataProvider.ImageSource.Image, RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" ContextProvider="{Binding Path=DataProvider,RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" Layer="{Binding RelativeSource={RelativeSource AncestorType=local:ImageLayer}}" />
  </DataTemplate>
  <local:MultiScaleImageTemplateSelector x:Key="multiScaleImageTemplateSelector" TileImageBase="{StaticResource multiScaleTileImageBase}" TileImage="{StaticResource multiScaleTileImage}" WmsImage="{StaticResource multiScaleWmsImage}" HeatImage="{StaticResource multiScaleHeatImage}" />
  <Style x:Key="{dxdst:DefaultStyleThemeKey FullName=DevExpress.Xpf.Map.ImageLayer}" TargetType="local:ImageLayer">
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="local:ImageLayer">
          <Grid x:Name="PART_RootVisual">
            <ContentControl Content="{Binding Path=DataProvider.DataType, RelativeSource={RelativeSource TemplatedParent}}" ContentTemplateSelector="{StaticResource multiScaleImageTemplateSelector}" />
            <Grid x:Name="PART_ErrorPanel" Visibility="Collapsed" Margin="2,2,0,0" MinHeight="29" HorizontalAlignment="Center" VerticalAlignment="Center" Width="400">
              <Border Opacity="0.75" CornerRadius="5" />
              <TextBlock TextWrapping="Wrap" Text="{Binding}" Margin="32" TextAlignment="Center" />
            </Grid>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>