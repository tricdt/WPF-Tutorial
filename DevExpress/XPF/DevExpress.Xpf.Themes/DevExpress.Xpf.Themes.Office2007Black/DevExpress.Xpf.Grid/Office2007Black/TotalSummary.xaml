<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                    xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys"
                    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                    xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ControlTemplate x:Key="{dxgt:TotalSummaryThemeKey ResourceKey=TotalSummaryControlTemplate}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Border x:Name="leftBandSeparator"
                    Background="{Binding Column.ActualBandCellLeftSeparatorColor}"
                    BorderBrush="{DynamicResource {dxgt:GridRowThemeKey ResourceKey=GridDataRowDelimiterBrush}}"
                    BorderThickness="1,0,1,0">
                <Border.Margin>
                    <Binding Path="Column.HasTopElement">
                        <Binding.Converter>
                            <dxg:TotalSummarySeparatorMarginConverter Left="-1"/>
                        </Binding.Converter>
                    </Binding>
                </Border.Margin>
                <Border.Width>
                    <Binding Path="Column.ActualBandLeftSeparatorWidth">
                        <Binding.Converter>
                            <dxg:BandSeparatorAddWidthConverter/>
                        </Binding.Converter>
                    </Binding>
                </Border.Width>
            </Border>
            <Border Background="Transparent" Grid.Column="1">
                <Grid Name="rootGrid" Margin="{TemplateBinding Padding}">
                    <Grid.Visibility>
                        <Binding Path="Column.HasTotalSummaries">
                            <Binding.Converter>
                                <dx:BoolToObjectConverter FalseValue="Hidden" TrueValue="Visible"/>
                            </Binding.Converter>
                        </Binding>
                    </Grid.Visibility>
                    <Border CornerRadius="2" Padding="1">
                        <Border.Margin>
                            <MultiBinding>
                                <MultiBinding.Bindings>
                                    <Binding Path="Column.HasTopElement"/>
                                    <Binding Path="Column.HasBottomElement"/>
                                </MultiBinding.Bindings>
                                <MultiBinding.Converter>
                                    <dxg:TotalSummaryBorderMarginConverter BottomMax="3"
                                                                           BottomMin="1"
                                                                           Left="1"
                                                                           Right="2"
                                                                           TopMax="4"
                                                                           TopMin="1"/>
                                </MultiBinding.Converter>
                            </MultiBinding>
                        </Border.Margin>
                        <Border.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FFD2D6DC" Offset="0.1"/>
                                <GradientStop Color="#FFDADEE4" Offset="0.9"/>
                                <GradientStop Color="#FFD5D8DE" Offset="1"/>
                                <GradientStop Color="#FF9FA3AB" Offset="0"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        <Border Background="#FFFFFFFF" CornerRadius="1">
                            <dxg:TotalSummaryContentPresenter Content="{Binding}"
                                                              ContentTemplateSelector="{Binding Path=Column.View.ActualTotalSummaryItemTemplateSelector}"
                                                              DataContext="{TemplateBinding DataContext}"
                                                              Style="{Binding Path=Column.ActualTotalSummaryContentStyle}"/>
                        </Border>
                    </Border>
                </Grid>
            </Border>
            <Border x:Name="rightBandSeparator"
                    Background="{Binding Column.ActualBandCellRightSeparatorColor}"
                    BorderBrush="{DynamicResource {dxgt:GridRowThemeKey ResourceKey=GridDataRowDelimiterBrush}}"
                    BorderThickness="1,0,1,0"
                    Grid.Column="2">
                <Border.Margin>
                    <Binding Path="Column.HasTopElement">
                        <Binding.Converter>
                            <dxg:TotalSummarySeparatorMarginConverter Left="-1"/>
                        </Binding.Converter>
                    </Binding>
                </Border.Margin>
                <Border.Width>
                    <Binding Path="Column.ActualBandRightSeparatorWidth">
                        <Binding.Converter>
                            <dxg:BandSeparatorAddWidthConverter/>
                        </Binding.Converter>
                    </Binding>
                </Border.Width>
            </Border>
        </Grid>
        <ControlTemplate.Triggers>
            <DataTrigger Binding="{Binding Column.ActualBandCellLeftSeparatorColor}" Value="{x:Null}">
                <Setter Property="Background"
                        TargetName="leftBandSeparator"
                        Value="{DynamicResource {dxgt:GridRowThemeKey ResourceKey=GridDataRowDelimiterBrush}}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Column.ActualBandCellRightSeparatorColor}" Value="{x:Null}">
                <Setter Property="Background"
                        TargetName="rightBandSeparator"
                        Value="{DynamicResource {dxgt:GridRowThemeKey ResourceKey=GridDataRowDelimiterBrush}}"/>
            </DataTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style x:Key="{dxgt:TotalSummaryThemeKey ResourceKey=TotalSummaryContentStyle}" TargetType="{x:Type dx:DataContentPresenter}">
        <Setter Property="HorizontalAlignment" Value="{Binding Path=Column.ActualHorizontalContentAlignment}"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="Margin" Value="3"/>
    </Style>

</ResourceDictionary>