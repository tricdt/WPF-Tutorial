<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                    xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Visibility x:Key="Visibility.Collapsed">Collapsed</Visibility>

    <Thickness x:Key="ZeroMargin">0,0,0,0</Thickness>

    <CornerRadius x:Key="ZeroCornerRadius">0,0,0,0</CornerRadius>

    <ControlTemplate x:Key="{dxt:PopupBaseThemeKey ResourceKey=BorderTemplate}" TargetType="{x:Type dx:PopupBorderControl}">
        <Grid Height="Auto"
              Margin="0,0,0,0"
              Width="Auto">
            <Border x:Name="shadow"
                    Background="#FF000000"
                    HorizontalAlignment="Stretch"
                    Margin="4,4,0,0"
                    Opacity="0.25"
                    Width="Auto"/>
            <Border x:Name="border"
                    Background="#FF6E6E6E"
                    Height="{TemplateBinding ContentHeight}"
                    Margin="0,0,4,4"
                    MaxHeight="{TemplateBinding ContentMaxHeight}"
                    MaxWidth="{TemplateBinding ContentMaxWidth}"
                    MinHeight="{TemplateBinding ContentMinHeight}"
                    MinWidth="{TemplateBinding ContentMinWidth}"
                    Padding="1"
                    Width="{TemplateBinding ContentWidth}">
                <Border Background="#FFF7F7F7">
                    <Grid>
                        <dx:BackgroundPanel Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
                    </Grid>
                </Border>
            </Border>
            <!--local:FrameworkElementHelper.ClipCornerRadius="2"-->
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="AppType">
                    <VisualState x:Name="Standalone"/>
                    <VisualState x:Name="BrowserHosted">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="shadow" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{StaticResource Visibility.Collapsed}"/>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="border" Storyboard.TargetProperty="Margin">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{StaticResource ZeroMargin}"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
        </Grid>
        <ControlTemplate.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsLeft" Value="False"></Condition>
                    <Condition Property="DropOpposite" Value="True"></Condition>
                </MultiTrigger.Conditions>
                <Setter Property="Margin"
                        TargetName="shadow"
                        Value="4,0,0,4"/>
                <Setter Property="Margin"
                        TargetName="border"
                        Value="0,4,4,0"/>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsLeft" Value="True"></Condition>
                    <Condition Property="DropOpposite" Value="True"></Condition>
                </MultiTrigger.Conditions>
                <Setter Property="Margin"
                        TargetName="shadow"
                        Value="0,0,4,4"/>
                <Setter Property="Margin"
                        TargetName="border"
                        Value="4,4,0,0"/>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsLeft" Value="True"></Condition>
                    <Condition Property="DropOpposite" Value="False"></Condition>
                </MultiTrigger.Conditions>
                <Setter Property="Margin"
                        TargetName="shadow"
                        Value="0,4,4,0"/>
                <Setter Property="Margin"
                        TargetName="border"
                        Value="4,0,0,4"/>
            </MultiTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

</ResourceDictionary>
