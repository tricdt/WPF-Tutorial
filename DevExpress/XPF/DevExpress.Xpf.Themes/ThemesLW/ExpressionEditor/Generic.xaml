<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxi="http://schemas.devexpress.com/winfx/2008/xaml/core/internal"
    xmlns:dxeen="clr-namespace:DevExpress.Xpf.ExpressionEditor.Native;assembly=DevExpress.Xpf.ExpressionEditor.v24.1"
    xmlns:dxee="clr-namespace:DevExpress.Xpf.ExpressionEditor;assembly=DevExpress.Xpf.ExpressionEditor.v24.1"
    xmlns:dxeet="clr-namespace:DevExpress.Xpf.ExpressionEditor.Themes;assembly=DevExpress.Xpf.ExpressionEditor.v24.1"
    xmlns:dxrich="http://schemas.devexpress.com/winfx/2008/xaml/richedit"
    xmlns:dxri="http://schemas.devexpress.com/winfx/2008/xaml/richedit/internal"
    xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
    xmlns:richedit="http://schemas.devexpress.com/winfx/2008/xaml/richedit"
    xmlns:dxmvvmi="clr-namespace:DevExpress.Mvvm.UI.Interactivity.Internal;assembly=DevExpress.Xpf.Core.v24.1">

    <Style x:Key="{dxeet:LWKey DocumentationControl.TreeViewStyle}" TargetType="{x:Type TreeView}" />
    <Style x:Key="{dxeet:LWKey DocumentationControl.TreeViewItemStyle}" TargetType="{x:Type TreeViewItem}" />
    <dx:EditorStringIdConverter x:Key="EditorStringIdConverter" />

    <Style x:Key="FieldsPlainControl.DefaultStyleBase" TargetType="{x:Type dxeen:FieldsPlainControl}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <dxe:TextEdit
                            x:Name="SearchBox"
                            ShowNullTextForEmptyValue="True"
                            NullText="{Binding Source={StaticResource EditorStringIdConverter}, ConverterParameter=ExpressionEditor_FunctionsSearch_NullText, Converter={StaticResource EditorStringIdConverter}, Mode=OneTime}"
                            Margin="0,0,0,5" />
                        <dxeen:FunctionsListBox
                            x:Name="PART_FunctionList"
                            Grid.Row="1"
                            Focusable="False"
                            TextSearch.TextPath="Name"
                            TextSearch.Text="{Binding ElementName=SearchBox, Path=Text}"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            AllowItemHighlighting="True"
                            ItemsSource="{Binding Path=(dxeen:DocumentationControl.Editor).OperatorsInfo, RelativeSource={RelativeSource Self}, Mode=OneWay}"
                            SelectedItem="{Binding Path=(dxeen:DocumentationControl.Editor).SelectedOperatorInfo, RelativeSource={RelativeSource Self}}"
                            dxmvvmi:InteractionHelper.EnableBehaviorsInDesignTime="True">
                            <dxeen:FunctionsListBox.ItemContainerStyle>
                                <Style TargetType="dxe:ListBoxEditItem">
                                    <Setter Property="dxmvvm:Interaction.BehaviorsTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <ContentControl>
                                                    <dxmvvm:EventToCommand EventName="MouseDoubleClick" Command="{Binding Path=AssociatedObject.(dxeen:DocumentationControl.Editor).ItemMouseDoubleClickCommand, RelativeSource={RelativeSource Self}}" />
                                                </ContentControl>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </dxeen:FunctionsListBox.ItemContainerStyle>
                        </dxeen:FunctionsListBox>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <DataTemplate x:Key="{dxeet:LWKey DocumentationControlTemplate.FieldsPlainDataTemplateKey}">
        <dxeen:FieldsPlainControl />
    </DataTemplate>

    <dxeen:FieldsPresenterTemplateSelector x:Key="{dxeet:LWKey DocumentationControlTemplate.FieldsPresenterTemplateSelectorKey}" />

    <Style x:Key="DocumentationControl.DefaultStyleBase" TargetType="{x:Type dxeen:DocumentationControl}">
        <Setter Property="Margin" Value="2,0" />
        <Setter Property="MinHeight" Value="60" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type dxeen:DocumentationControl}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*" MinWidth="90" />
                            <ColumnDefinition Width="5" />
                            <ColumnDefinition Width="5*" MinWidth="150" />
                            <ColumnDefinition Width="5" />
                            <ColumnDefinition Width="5*" MinWidth="150" />
                        </Grid.ColumnDefinitions>
                        <dxeen:TreeViewEx
                            Style="{DynamicResource {dxeet:LWKey DocumentationControl.TreeViewStyle}}"
                            ItemContainerStyle="{DynamicResource {dxeet:LWKey DocumentationControl.TreeViewItemStyle}}"
                            ItemsSource="{Binding Items, RelativeSource={RelativeSource TemplatedParent}}"
                            CurrentItem="{Binding SelectedItem, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}">
                            <TreeView.ItemTemplate>
                                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                    <TextBlock Text="{Binding DisplayName}" Margin="0,0,4,0" />
                                </HierarchicalDataTemplate>
                            </TreeView.ItemTemplate>
                        </dxeen:TreeViewEx>
                        <GridSplitter
                            Grid.Column="1"
                            Width="5"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Stretch"
                            Background="Transparent" />
                        <ContentControl Grid.Column="2" Content="{Binding SelectedItem, RelativeSource={RelativeSource TemplatedParent}}" ContentTemplateSelector="{DynamicResource {dxeet:LWKey DocumentationControlTemplate.FieldsPresenterTemplateSelectorKey}}" />
                        <GridSplitter
                            Grid.Column="3"
                            Width="5"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Stretch"
                            Background="Transparent" />
                        <ContentControl Grid.Column="4" Content="{x:Null}" ContentTemplate="{Binding DescriptionBlockTemplate, RelativeSource={RelativeSource TemplatedParent}}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <Setter Property="DescriptionBlockTemplate">
            <Setter.Value>
                <DataTemplate>
                    <dxeen:DocumentationRichEditControl
                        x:Name="PART_Description"
                        ActiveViewType="Simple"
                        ReadOnly="True"
                        HorizontalScrollBarVisibility="Collapsed"
                        VerticalScrollBarVisibility="Collapsed"
                        Margin="-2">

                        <dxeen:HtmlTextExtensions.HtmlText>
                            <MultiBinding Mode="OneWay" Converter="{dxeen:SelectedOperatorToDescriptionConverter}">
                                <Binding Path="(dxeen:DocumentationControl.Editor).SelectedOperatorInfo" RelativeSource="{RelativeSource Self}" />
                                <Binding Path="(dxee:ExpressionEditorControl.Editor).Context.ColorProvider" RelativeSource="{RelativeSource Self}" />
                            </MultiBinding>
                        </dxeen:HtmlTextExtensions.HtmlText>
                    </dxeen:DocumentationRichEditControl>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <dxmvvm:ObjectToObjectConverter x:Key="ItemKindToImageConverter">
        <dxmvvm:MapItem Source="Function" Target="{dx:ImageSelector Source='pack://application:,,,/DevExpress.Xpf.ExpressionEditor.v24.1;component/Images/Method.png', SvgSource='pack://application:,,,/DevExpress.Xpf.ExpressionEditor.v24.1;component/Images/Function.svg'}" />
        <dxmvvm:MapItem Source="Column" Target="{dx:ImageSelector Source='pack://application:,,,/DevExpress.Xpf.ExpressionEditor.v24.1;component/Images/Property.png', SvgSource='pack://application:,,,/DevExpress.Xpf.ExpressionEditor.v24.1;component/Images/Field.svg'}" />
        <dxmvvm:MapItem Source="Parameter" Target="{dx:ImageSelector Source='pack://application:,,,/DevExpress.Xpf.ExpressionEditor.v24.1;component/Images/Property.png', SvgSource='pack://application:,,,/DevExpress.Xpf.ExpressionEditor.v24.1;component/Images/Parameter.svg'}" />
        <dxmvvm:MapItem Source="Operator" Target="pack://application:,,,/DevExpress.Xpf.ExpressionEditor.v24.1;component/Images/JoinTable.png" />
    </dxmvvm:ObjectToObjectConverter>

    <Style x:Key="ExpressionEditor.DefaultStyle" TargetType="{x:Type dxee:ExpressionEditorControl}">
        <Setter Property="MinHeight" Value="150" />
        <Setter Property="MinWidth" Value="400" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type dxee:ExpressionEditorControl}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition MinHeight="60" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition MinHeight="60" />
                        </Grid.RowDefinitions>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="{Binding TemplatedParent.Errors, ElementName=PART_ErrorsList, Converter={dxeen:ExpressionErrorsToErrorsListHeightConverter Stars=0.5}}" />
                            </Grid.RowDefinitions>
                            <dxeen:IntelliSenseRichEdit
                                x:Name="PART_IntelliSenseRichEdit"
                                FontFamily="Consolas"
                                FontSize="12"
                                ShowBorder="True"
                                HorizontalScrollBarVisibility="Collapsed"
                                VerticalScrollBarVisibility="Visible"
                                ActiveViewType="Simple"
                                PopupIsOpen="{Binding AutoCompleteListViewModel.PopupIsOpen, RelativeSource={RelativeSource TemplatedParent}}"
                                dxmvvmi:InteractionHelper.EnableBehaviorsInDesignTime="True">
                                <dxmvvm:Interaction.Behaviors>
                                    <dxmvvm:EventToCommand EventName="ContentChanged" Command="{Binding OnContentChangedCommand, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <dxmvvm:EventToCommand EventName="PreviewKeyDown" Command="{Binding OnPreviewKeyDownCommand, RelativeSource={RelativeSource TemplatedParent}}" PassEventArgsToCommand="True" />
                                    <dxmvvm:EventToCommand EventName="PreviewTextInput" Command="{Binding OnPreviewTextInputCommand, RelativeSource={RelativeSource TemplatedParent}}" PassEventArgsToCommand="True" />
                                    <dxmvvm:EventToCommand EventName="MouseMove" Command="{Binding OnMouseMoveCommand, RelativeSource={RelativeSource TemplatedParent}}" PassEventArgsToCommand="True" />
                                    <dxmvvm:EventToCommand EventName="MouseDown" Command="{Binding OnMouseDownCommand, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <dxmvvm:EventToCommand EventName="LostFocus" Command="{Binding OnLostFocusCommand, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <dxmvvm:EventToCommand EventName="SelectionChanged" Command="{Binding OnSelectionChangedCommand, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <dxmvvm:EventToCommand EventName="PopupMenuShowing" Command="{Binding OnPopupMenuShowingCommand, RelativeSource={RelativeSource TemplatedParent}}" PassEventArgsToCommand="True" />
                                    <dxmvvm:EventToCommand EventName="BeforePagePaint" Command="{Binding OnBeforePagePaintCommand, RelativeSource={RelativeSource TemplatedParent}}" PassEventArgsToCommand="True" />
                                </dxmvvm:Interaction.Behaviors>
                                <dxeen:IntelliSenseRichEdit.ToolTip>
                                    <ToolTip />
                                </dxeen:IntelliSenseRichEdit.ToolTip>
                                <dxeen:IntelliSenseRichEdit.Resources>
                                    <Style TargetType="dxri:XpfRichEditCaret">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="dxri:XpfRichEditCaret">
                                                    <Grid UseLayoutRounding="True">
                                                        <Grid.Resources>
                                                            <Storyboard x:Key="Animate1" x:Name="Animate">
                                                                <DoubleAnimation Storyboard.TargetName="Caret" Storyboard.TargetProperty="Opacity" AutoReverse="True" RepeatBehavior="Forever" To="0" From="1" Duration="0:0:0.8">
                                                                    <DoubleAnimation.EasingFunction>
                                                                        <BackEase Amplitude="1" EasingMode="EaseInOut" />
                                                                    </DoubleAnimation.EasingFunction>
                                                                </DoubleAnimation>
                                                            </Storyboard>
                                                        </Grid.Resources>
                                                        <Rectangle
                                                            x:Name="Caret"
                                                            Fill="{Binding AutoForeground, ElementName=PART_IntelliSenseRichEdit}"
                                                            Width="10"
                                                            VerticalAlignment="Stretch"
                                                            UseLayoutRounding="True" />
                                                    </Grid>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </dxeen:IntelliSenseRichEdit.Resources>
                            </dxeen:IntelliSenseRichEdit>
                            <dxb:PopupControlContainer
                                DataContext="{Binding AutoCompleteListViewModel, RelativeSource={RelativeSource TemplatedParent}}"
                                PlacementTarget="{Binding ElementName=PART_IntelliSenseRichEdit}"
                                HorizontalOffset="{Binding HorizontalOffset}"
                                VerticalOffset="{Binding VerticalOffset}"
                                IsOpen="{Binding PopupIsOpen}"
                                Focusable="False"
                                Placement="Relative"
                                MaxHeight="150"
                                Width="250"
                                MinWidth="250"
                                dxmvvmi:InteractionHelper.EnableBehaviorsInDesignTime="True">
                                <dxmvvm:Interaction.Behaviors>
                                    <dxeen:AutoCompleteNavigationService ItemsHost="{Binding ElementName=PART_AutoCompleteListBox}" IntelliSenseRichEdit="{Binding ElementName=PART_IntelliSenseRichEdit}" />
                                </dxmvvm:Interaction.Behaviors>
                                <dxb:PopupControlContainer.Content>
                                    <Grid>
                                        <TextBlock Text="No suggestions" Margin="6,2" Visibility="{Binding ItemsSource, Converter={dxeen:ItemsSourceToBooleanConverter Invert=True}}" />
                                        <dxe:ListBoxEdit
                                            x:Name="PART_AutoCompleteListBox"
                                            DisplayMember="Value"
                                            Focusable="False"
                                            AllowItemHighlighting="True"
                                            ItemsSource="{Binding ItemsSource}"
                                            SelectedIndex="{Binding SelectedIndex}"
                                            EditValue="{Binding EditValue}"
                                            Visibility="{Binding ItemsSource, Converter={dxeen:ItemsSourceToBooleanConverter}}"
                                            dxmvvmi:InteractionHelper.EnableBehaviorsInDesignTime="True">
                                            <dxmvvm:Interaction.Behaviors>
                                                <dxmvvm:EventToCommand EventName="MouseUp" Command="{Binding ItemsHostMouseUpCommand}" />
                                                <dxmvvm:EventToCommand EventName="GotFocus" Command="{Binding ItemsHostGotFocusCommand}" />
                                                <dxmvvm:EventToCommand EventName="SelectedIndexChanged" Command="{Binding SelectedIndexChangedCommand}" />
                                            </dxmvvm:Interaction.Behaviors>
                                            <dxe:ListBoxEdit.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <dx:DXImage
                                                            Source="{Binding ItemKind, Converter={StaticResource ItemKindToImageConverter}}"
                                                            Margin="0,0,5,0"
                                                            Width="16"
                                                            Height="16" />
                                                        <TextBlock Text="{Binding Value}" />
                                                    </StackPanel>
                                                </DataTemplate>
                                            </dxe:ListBoxEdit.ItemTemplate>
                                        </dxe:ListBoxEdit>
                                    </Grid>
                                </dxb:PopupControlContainer.Content>
                            </dxb:PopupControlContainer>
                            <dxe:ListBoxEdit
                                x:Name="PART_ErrorsList"
                                Grid.Row="1"
                                DisplayMember="Text"
                                ItemsSource="{Binding Errors, RelativeSource={RelativeSource TemplatedParent}}"
                                ShowBorder="True"
                                Margin="2,0,2,0"
                                Visibility="{Binding Errors, Converter={dxeen:ExpressionErrorsToErrorsListVisibilityConverter}, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                dxmvvmi:InteractionHelper.EnableBehaviorsInDesignTime="True">
                                <dxe:ListBoxEdit.ItemContainerStyle>
                                    <Style TargetType="dxe:ListBoxEditItem">
                                        <Setter Property="Foreground" Value="Red" />
                                    </Style>
                                </dxe:ListBoxEdit.ItemContainerStyle>
                                <dxmvvm:Interaction.Behaviors>
                                    <dxmvvm:EventToCommand EventName="PreviewMouseLeftButtonDown" Command="{Binding OnErrorsPreviewMouseLeftButtonDown, RelativeSource={RelativeSource TemplatedParent}}" PassEventArgsToCommand="True" />
                                </dxmvvm:Interaction.Behaviors>
                            </dxe:ListBoxEdit>
                        </Grid>
                        <GridSplitter
                            Grid.Row="1"
                            Height="5"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Stretch"
                            Background="Transparent" />
                        <ContentControl
                            Grid.Row="2"
                            Content="{x:Null}"
                            MaxHeight="1000000"
                            ContentTemplate="{Binding DocumentationControlTemplate, RelativeSource={RelativeSource TemplatedParent}}" />

                        <Grid.Resources>
                            <Style TargetType="{x:Type GridSplitter}">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type GridSplitter}">
                                            <Rectangle Fill="{TemplateBinding Background}" StrokeThickness="0" />
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                            <Style TargetType="{x:Type dxeen:IntelliSenseRichEdit}">
                                <Setter Property="BehaviorOptions">
                                    <Setter.Value>
                                        <richedit:DXRichEditBehaviorOptions PasteLineBreakSubstitution="Paragraph" />
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="DocumentCapabilitiesOptions">
                                    <Setter.Value>
                                        <richedit:DXRichEditDocumentCapabilitiesOptions
                                            Bookmarks="Disabled"
                                            Tables="Disabled"
                                            Sections="Disabled"
                                            InlinePictures="Disabled"
                                            HeadersFooters="Disabled"
                                            Hyperlinks="Disabled"
                                            ParagraphStyle="Disabled"
                                            Comments="Disabled"
                                            EndNotes="Disabled"
                                            Fields="Disabled"
                                            FloatingObjects="Disabled"
                                            FootNotes="Disabled"
                                            ParagraphTabs="Disabled">
                                            <richedit:DXRichEditDocumentCapabilitiesOptions.NumberingOptions>
                                                <richedit:DXRichEditNumberingOptions Simple="Disabled" MultiLevel="Disabled" Bulleted="Disabled" />
                                            </richedit:DXRichEditDocumentCapabilitiesOptions.NumberingOptions>
                                        </richedit:DXRichEditDocumentCapabilitiesOptions>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Grid.Resources>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <Setter Property="DocumentationControlTemplate">
            <Setter.Value>
                <DataTemplate>
                    <dxeen:DocumentationControl />
                </DataTemplate>
            </Setter.Value>
        </Setter>

        <Setter Property="MessageBoxServiceTemplate">
            <Setter.Value>
                <DataTemplate>
                    <ContentControl>
                        <dx:DXMessageBoxService />
                    </ContentControl>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>