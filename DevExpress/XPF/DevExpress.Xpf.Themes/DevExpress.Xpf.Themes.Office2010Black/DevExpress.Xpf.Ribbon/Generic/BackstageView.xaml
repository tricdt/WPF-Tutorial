<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/core" xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon" xmlns:dxrt="http://schemas.devexpress.com/winfx/2008/xaml/ribbon/themekeys" xmlns:dxcn="http://schemas.devexpress.com/winfx/2008/xaml/core/internal" xmlns:dxri="http://schemas.devexpress.com/winfx/2008/xaml/ribbon/internal" xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">
  <dxc:BooleanToVisibilityConverter x:Key="boolToVisibilityConverter" Invert="False" />
  <dxc:BooleanToVisibilityConverter x:Key="invertBoolToVisibilityConverter" Invert="True" />
  <ControlTemplate x:Key="{dxrt:BackstageThemeKey ResourceKey=ControlItemsTemplate}" TargetType="{x:Type dxr:BackstageViewItemsControl}">
    <ItemsPresenter x:Name="itemsPresenter" Style="{TemplateBinding ItemsPresenterStyle}" Focusable="False" />
  </ControlTemplate>
  <ControlTemplate x:Key="{dxrt:BackstageThemeKey ResourceKey=BackstageViewContentHostTemplate}" TargetType="{x:Type dxr:BackstageViewContentHost}">
    <Grid>
      <DockPanel x:Name="PART_Root" ClipToBounds="True" LastChildFill="True">
        <DockPanel.RenderTransform>
          <TranslateTransform />
        </DockPanel.RenderTransform>
        <Grid DockPanel.Dock="Left">
          <Control x:Name="PART_LeftPaneBackground" Template="{DynamicResource ResourceKey={dxrt:BackstageThemeKey ResourceKey=LeftPartBackground}}" />
          <DockPanel LastChildFill="True">
            <dxr:RibbonCheckedBorderControl x:Name="PART_Glyph" dxcn:WindowChrome.IsHitTestVisibleInChrome="True" DockPanel.Dock="Top" Style="{DynamicResource ResourceKey={dxrt:BackstageThemeKey ResourceKey=BackstageViewBackGlyphTemplate}}" />
            <ContentControl x:Name="PART_Left" DockPanel.Dock="Bottom" Content="{TemplateBinding LeftContent}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" />
          </DockPanel>
        </Grid>
        <DockPanel DockPanel.Dock="Right" LastChildFill="True">
          <Border Height="{Binding ElementName=PART_HeaderAndButtons, Path=ActualHeight}" Visibility="{Binding ElementName=PART_HeaderAndButtons, Path=Visibility}" DockPanel.Dock="Top" />
          <ContentControl x:Name="PART_Right" Content="{TemplateBinding RightContent}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" DockPanel.Dock="Bottom" />
        </DockPanel>
      </DockPanel>
      <Grid x:Name="PART_HeaderAndButtons" VerticalAlignment="Top">
        <Control x:Name="PART_HeaderAndButtonsBackground" Template="{DynamicResource ResourceKey={dxrt:BackstageThemeKey ResourceKey=HeaderAndButtonsBackground}}" />
        <dxri:BackstageViewHeaderPresenter x:Name="PART_HeaderPresenter" Content="{Binding Path=(dxcn:DXWindowsHelper.Window).Title, RelativeSource={RelativeSource Mode=Self}}" HorizontalAlignment="Stretch" VerticalAlignment="Top" RightOffset="{Binding ElementName=PART_ControlBoxContainer, Path=ActualWidth}" LeftOffset="{Binding ElementName=PART_Left, Path=ActualWidth}" BackstageViewControl="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=dxr:BackstageViewControl}}" Style="{DynamicResource ResourceKey={dxrt:BackstageThemeKey ResourceKey=HeaderPresenterStyle}}" />
        <dxri:RibbonControlBoxContainer x:Name="PART_ControlBoxContainer" HorizontalAlignment="Right" VerticalAlignment="Top" ShowCustomItems="False" Style="{DynamicResource ResourceKey={dxrt:BackstageThemeKey ResourceKey=ControlBoxContainerStyle}}" dxcn:WindowChrome.IsHitTestVisibleInChrome="True" />
      </Grid>
      <Grid x:Name="PART_ResizeBox">
        <Border x:Name="PART_Resize_N" />
      </Grid>
    </Grid>
    <ControlTemplate.Triggers>
      <DataTrigger Binding="{Binding Path=EnableWindowTitleShrink, RelativeSource={RelativeSource AncestorType={x:Type dxr:BackstageViewControl}}}" Value="False">
        <Setter TargetName="PART_HeaderAndButtons" Property="Visibility" Value="Collapsed" />
      </DataTrigger>
      <DataTrigger Binding="{Binding Path=IsFullScreen, RelativeSource={RelativeSource AncestorType={x:Type dxr:BackstageViewControl}}}" Value="False">
        <Setter TargetName="PART_Glyph" Property="Visibility" Value="Collapsed" />
        <Setter TargetName="PART_HeaderAndButtons" Property="Visibility" Value="Collapsed" />
      </DataTrigger>
      <DataTrigger Binding="{Binding Path=(dxr:RibbonControl.Ribbon).IsInRibbonWindow, RelativeSource={RelativeSource Self}}" Value="False">
        <Setter TargetName="PART_HeaderAndButtons" Property="Visibility" Value="Collapsed" />
      </DataTrigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>
  <ControlTemplate x:Key="{dxrt:BackstageThemeKey ResourceKey=ControlTemplate}" TargetType="{x:Type dxr:BackstageViewControl}">
    <Grid Focusable="False">
      <Control Template="{DynamicResource {dxrt:BackstageThemeKey ResourceKey=BorderTemplate}}" Focusable="False" />
      <Grid Focusable="False" Margin="{TemplateBinding BorderThickness}">
        <ContentControl Style="{TemplateBinding BackgroundStyle}" Focusable="False" />
        <Image Source="{TemplateBinding ActualBackgroundGlyph}" Style="{TemplateBinding BackgroundGlyphStyle}" Focusable="False" Visibility="{Binding IsBackgroundGlyphVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource boolToVisibilityConverter}}" />
        <dxr:BackstageViewContentHost x:Name="PART_ContentHost" Template="{DynamicResource {dxrt:BackstageThemeKey ResourceKey=BackstageViewContentHostTemplate}}" Focusable="False" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ClipToBounds="True">
          <dxr:BackstageViewContentHost.LeftContent>
            <dxr:BackstageViewLeftPartContentControl Style="{TemplateBinding TabPaneStyle}" MinWidth="{TemplateBinding TabPaneMinWidth}" Focusable="False">
              <dxr:BackstageViewItemsControl x:Name="backstageViewItemsControl" Template="{DynamicResource ResourceKey={dxrt:BackstageThemeKey ResourceKey=ControlItemsTemplate}}" />
            </dxr:BackstageViewLeftPartContentControl>
          </dxr:BackstageViewContentHost.LeftContent>
          <dxr:BackstageViewContentHost.RightContent>
            <dxri:BackstageControlPaneContentControl Style="{TemplateBinding ControlPaneStyle}" Grid.Column="1" Content="{TemplateBinding ActualControlPane}" Focusable="False" dxr:RibbonControlHelper.DisableSharedSizeScope="True" Visibility="{Binding SelectedTab.Visibility, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
          </dxr:BackstageViewContentHost.RightContent>
        </dxr:BackstageViewContentHost>
      </Grid>
    </Grid>
  </ControlTemplate>
</ResourceDictionary>