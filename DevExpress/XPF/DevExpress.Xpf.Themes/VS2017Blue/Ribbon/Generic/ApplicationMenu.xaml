<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/core" xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars" xmlns:dxbt="http://schemas.devexpress.com/winfx/2008/xaml/bars/themekeys" xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon" xmlns:dxrt="http://schemas.devexpress.com/winfx/2008/xaml/ribbon/themekeys" xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">
  <dxc:BooleanToVisibilityConverter x:Key="boolToVisibilityConverter" Invert="False" />
  <ControlTemplate x:Key="{dxrt:RibbonThemeKey ResourceKey=ApplicationMenuBarControlTemplate}" TargetType="{x:Type dxr:ApplicationMenuBarControl}">
    <ContentControl Template="{TemplateBinding ActualBorderTemplate}">
      <Grid dxc:DragManager.DropTargetFactory="{dxb:SubMenuBarControlDropTargetFactory}" Background="Transparent" x:Name="PART_LeftPaneGrid">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Row="0" Grid.Column="0">
          <Grid Width="Auto" Height="Auto">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Border Grid.Column="0" SnapsToDevicePixels="True" Margin="{TemplateBinding GlyphPadding}" Width="{Binding Path=MaxGlyphSize.Width, RelativeSource={RelativeSource TemplatedParent}}" />
            <ContentControl Grid.ColumnSpan="2" SnapsToDevicePixels="True" Template="{DynamicResource {dxrt:RibbonThemeKey ResourceKey=ApplicationMenuBackgroundTemplate}}" />
          </Grid>
          <dxb:SubMenuScrollViewer x:Name="PART_ScrollViewer" Style="{DynamicResource {dxbt:SubMenuBarControlThemeKey ResourceKey=ScrollViewerStyle}}">
            <ItemsPresenter />
          </dxb:SubMenuScrollViewer>
        </Grid>
        <ContentControl x:Name="PART_RightPane" Visibility="Collapsed" Width="{TemplateBinding ActualRightPaneWidth}" Template="{DynamicResource {dxrt:RibbonThemeKey ResourceKey=ApplicationMenuRightPaneTemplate}}" Grid.Row="0" Grid.Column="1">
          <dxc:DXContentPresenter x:Name="PART_RightPanePresenter" Foreground="{DynamicResource {dxrt:RibbonThemeKey ResourceKey=ApplicationMenuRightPaneForeground}}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Content="{Binding Path=Popup.RightPane, RelativeSource={RelativeSource TemplatedParent}}" />
        </ContentControl>
        <ContentControl Template="{DynamicResource {dxrt:RibbonThemeKey ResourceKey=ApplicationMenuBottomPaneTemplate}}" Grid.Row="1" Grid.ColumnSpan="2">
          <dxc:DXContentPresenter x:Name="PART_BottomPanePresenter" Content="{Binding Path=Popup.BottomPane, RelativeSource={RelativeSource TemplatedParent}}" />
        </ContentControl>
      </Grid>
    </ContentControl>
    <ControlTemplate.Triggers>
      <DataTrigger Binding="{Binding Path=Popup.ShowRightPane, RelativeSource={RelativeSource Self}}" Value="True">
        <Setter TargetName="PART_RightPane" Property="Visibility" Value="Visible" />
      </DataTrigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>
  <ControlTemplate x:Key="{dxrt:RibbonThemeKey ResourceKey=ApplicationMenuContentControlTemplate}" TargetType="{x:Type dxr:ApplicationMenuContentControl}">
    <ContentControl Template="{DynamicResource {dxrt:RibbonThemeKey ResourceKey=ApplicationMenuContentControlBorderTemplate}}" Focusable="False">
      <dxc:DXContentPresenter Content="{TemplateBinding Content}" />
    </ContentControl>
  </ControlTemplate>
</ResourceDictionary>