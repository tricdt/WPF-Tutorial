<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:dxtm="http://schemas.devexpress.com/winfx/2008/xaml/treemap" xmlns:dxdash="http://schemas.devexpress.com/winfx/2008/xaml/dashboard" xmlns:dxdashi="http://schemas.devexpress.com/winfx/2008/xaml/dashboard/internal" xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" xmlns:dasboardthemes="http://schemas.devexpress.com/winfx/2008/xaml/dashboard/themekeys" xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">
  <DataTemplate x:Key="tooltipTemplate">
    <TextBlock TextWrapping="Wrap" Text="{Binding Item.ToolTip}" Margin="20,15,20,18" Foreground="{DynamicResource {dasboardthemes:TreemapItemThemeKey ResourceKey=ToolTipForeground}}" FontSize="{DynamicResource {dasboardthemes:TreemapItemThemeKey ResourceKey=ToolTipFontSize}}" FontWeight="{DynamicResource {dasboardthemes:TreemapItemThemeKey ResourceKey=ToolTipFontWeight}}" />
  </DataTemplate>
  <DataTemplate x:Key="ColorizerKey">
    <ContentControl>
      <dxdashi:DashboardTreemapColorizer />
    </ContentControl>
  </DataTemplate>
  <dxdashi:TreemapMouseEventArgsConverter x:Key="TreemapMouseEventArgsConverter" />
  <Style x:Key="{dasboardthemes:TreemapItemThemeKey ResourceKey=ViewStyle}" TargetType="{x:Type dxtm:TreeMapControl}">
    <Setter Property="LayoutAlgorithm" Value="{Binding LayoutAlgorithm}" />
    <Setter Property="ToolTipEnabled" Value="True" />
    <Setter Property="ToolTipContentTemplate" Value="{StaticResource tooltipTemplate}" />
    <Setter Property="ToolTipGroupContentTemplate" Value="{StaticResource tooltipTemplate}" />
    <Setter Property="SelectedItems" Value="{Binding SelectedItems}" />
    <Setter Property="SelectionMode" Value="None" />
    <Setter Property="MaxWidth" Value="{Binding MaxWidth}" />
    <Setter Property="MaxHeight" Value="{Binding MaxHeight}" />
    <Setter Property="ToolTipOptions">
      <Setter.Value>
        <dxtm:ToolTipOptions OpenMode="OnHover" />
      </Setter.Value>
    </Setter>
    <Setter Property="DataAdapter" Value="{Binding Data, Converter={dxdashi:TreemapDataAdapterConverter}}" />
    <Setter Property="dxmvvm:Interaction.BehaviorsTemplate">
      <Setter.Value>
        <DataTemplate>
          <ItemsControl>
            <dxdashi:TreemapItemBehavior ColorizerTemplate="{StaticResource ColorizerKey}" />
            <dxmvvm:EventToCommand EventName="MouseUp" Command="{Binding OnTreeMapMouseUpCommand}" PassEventArgsToCommand="True" EventArgsConverter="{StaticResource TreemapMouseEventArgsConverter}" />
            <dxmvvm:EventToCommand EventName="MouseDoubleClick" Command="{Binding OnTreeMapMouseDoubleClickCommand}" PassEventArgsToCommand="True" EventArgsConverter="{StaticResource TreemapMouseEventArgsConverter}" />
            <dxmvvm:EventToCommand EventName="MouseMove" Command="{Binding OnTreeMapMouseMoveCommand}" PassEventArgsToCommand="True" EventArgsConverter="{StaticResource TreemapMouseEventArgsConverter}" />
            <dxmvvm:EventToCommand EventName="MouseDown" Command="{Binding OnTreeMapMouseDownCommand}" PassEventArgsToCommand="True" EventArgsConverter="{StaticResource TreemapMouseEventArgsConverter}" />
          </ItemsControl>
        </DataTemplate>
      </Setter.Value>
    </Setter>
    <Style.Resources>
      <HierarchicalDataTemplate DataType="{x:Type dxdashi:TreemapNodeXpf}" ItemsSource="{Binding Children}">
        <dxtm:HierarchicalTreeMapItemControl Text="{Binding Label}" />
      </HierarchicalDataTemplate>
    </Style.Resources>
  </Style>
  <DataTemplate x:Key="{dasboardthemes:TreemapItemThemeKey ResourceKey=Template}">
    <dxtm:TreeMapControl Style="{Binding Path=(dxdash:DashboardLayoutItem.ViewStyle), RelativeSource={RelativeSource TemplatedParent}}" />
  </DataTemplate>
</ResourceDictionary>