<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                    xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Visibility x:Key="Visibility.Collapsed">Collapsed</Visibility>

    <Thickness x:Key="ZeroMargin">0</Thickness>

    <CornerRadius x:Key="ZeroCornerRadius">0</CornerRadius>

    <ControlTemplate x:Key="{dxt:PopupBaseThemeKey ResourceKey=BorderTemplate}" TargetType="{x:Type dx:PopupBorderControl}">
        <Grid Name="Root" ClipToBounds="False">
            <Border x:Name="Shadow"
                    Background="#FF000000"
                    Margin="2,2,0,0"
                    Opacity="0.10"/>
            <Border x:Name="Border"
                    Background="#FFBCC7D8"
                    BorderBrush="#FF8B97A7"
                    BorderThickness="1"
                    Height="{TemplateBinding ContentHeight}"
                    Margin="0,0,3,3"
                    MaxHeight="{TemplateBinding ContentMaxHeight}"
                    MaxWidth="{TemplateBinding ContentMaxWidth}"
                    MinHeight="{TemplateBinding ContentMinHeight}"
                    MinWidth="{TemplateBinding ContentMinWidth}"
                    Width="{TemplateBinding ContentWidth}">
                <ContentPresenter/>
            </Border>
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="AppType">
                    <VisualState x:Name="Standalone"/>
                    <VisualState x:Name="BrowserHosted">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Shadow" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{StaticResource Visibility.Collapsed}"/>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Margin">
                                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{StaticResource ZeroMargin}"/>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="CornerRadius">
                                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{StaticResource ZeroCornerRadius}"/>
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Root" Storyboard.TargetProperty="Margin">
                                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{StaticResource ZeroMargin}"/>
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>
        </Grid>
        <ControlTemplate.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsLeft" Value="False"></Condition>
                    <Condition Property="DropOpposite" Value="True"></Condition>
                </MultiTrigger.Conditions>
                <Setter Property="Margin"
                        TargetName="Shadow"
                        Value="2,0,0,2"/>
                <Setter Property="Margin"
                        TargetName="Border"
                        Value="0,3,3,0"/>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsLeft" Value="True"></Condition>
                    <Condition Property="DropOpposite" Value="True"></Condition>
                </MultiTrigger.Conditions>
                <Setter Property="Margin"
                        TargetName="Shadow"
                        Value="0,0,2,2"/>
                <Setter Property="Margin"
                        TargetName="Border"
                        Value="3,3,0,0"/>
            </MultiTrigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsLeft" Value="True"></Condition>
                    <Condition Property="DropOpposite" Value="False"></Condition>
                </MultiTrigger.Conditions>
                <Setter Property="Margin"
                        TargetName="Shadow"
                        Value="0,2,2,0"/>
                <Setter Property="Margin"
                        TargetName="Border"
                        Value="3,0,0,3"/>
            </MultiTrigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

</ResourceDictionary>