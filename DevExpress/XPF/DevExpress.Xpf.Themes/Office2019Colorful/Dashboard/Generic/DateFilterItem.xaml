<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" xmlns:dxdash="http://schemas.devexpress.com/winfx/2008/xaml/dashboard" xmlns:dxdashi="http://schemas.devexpress.com/winfx/2008/xaml/dashboard/internal" xmlns:dxdasht="http://schemas.devexpress.com/winfx/2008/xaml/dashboard/themekeys" xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">
  <dxdashi:EventToCommandConverter x:Key="EventToCommandConverter" />
  <Style x:Key="{dxdasht:DateFilterItemThemeKey ResourceKey=DateNavigatorStyle}" TargetType="{x:Type dxe:DateNavigator}">
    <Setter Property="ShowTodayButton" Value="False" />
    <Setter Property="ShowWeekNumbers" Value="False" />
    <Setter Property="IsMultiSelect" Value="False" />
    <Setter Property="Margin" Value="5,5,5,5" />
  </Style>
  <DataTemplate x:Key="{dxdasht:DateFilterItemThemeKey ResourceKey=DatePickerPopupTemplate}">
    <StackPanel Orientation="Horizontal" Background="{DynamicResource {dxdasht:DateFilterItemThemeKey ResourceKey=PopupBackground}}" TextElement.Foreground="{DynamicResource {dxdasht:DateFilterItemThemeKey ResourceKey=PopupForeground}}">
      <StackPanel Orientation="Vertical" Visibility="{Binding ShowFirstEditor}">
        <dxe:DateNavigator Style="{Binding Path=(dxdash:DateFilterDashboardLayoutItem.DateNavigatorStyle), RelativeSource={RelativeSource TemplatedParent}}" SelectedDates="{Binding FirstValues}" FocusedDate="{Binding FirstValue, Mode=TwoWay}" ColumnCount="1" RowCount="1">
          <dxmvvm:Interaction.Behaviors>
            <dxdashi:DateNavigatorBehavior />
            <dxmvvm:EventToCommand EventName="SelectedDatesChanged" Command="{Binding OnFirstSelectedDatesChangedCommand}" EventArgsConverter="{StaticResource EventToCommandConverter}" PassEventArgsToCommand="True" />
          </dxmvvm:Interaction.Behaviors>
        </dxe:DateNavigator>
        <dxe:TextEdit EditValue="{Binding FirstValue}" MaskUseAsDisplayFormat="True" MaskType="DateTime" Margin="5,5,5,5">
          <dxmvvm:Interaction.Behaviors>
            <dxmvvm:EventToCommand EventName="EditValueChanged" Command="{Binding OnFirstEditValueChangedCommand}" EventArgsConverter="{StaticResource EventToCommandConverter}" PassEventArgsToCommand="True" />
          </dxmvvm:Interaction.Behaviors>
        </dxe:TextEdit>
        <dx:SimpleButton Content="{dxdashi:DashboardLocalizationString ButtonApply}" HorizontalAlignment="Right" Visibility="{Binding ShowApplyButtonInFirstEditor}" Margin="5,5,5,5">
          <dxmvvm:Interaction.Behaviors>
            <dxmvvm:EventToCommand EventName="Click" Command="{Binding OnApplyButtonClickCommand}" />
          </dxmvvm:Interaction.Behaviors>
        </dx:SimpleButton>
      </StackPanel>
      <StackPanel Orientation="Vertical" Visibility="{Binding ShowSecondEditor}">
        <dxe:DateNavigator Style="{Binding Path=(dxdash:DateFilterDashboardLayoutItem.DateNavigatorStyle), RelativeSource={RelativeSource TemplatedParent}}" SelectedDates="{Binding SecondValues}" FocusedDate="{Binding SecondValue, Mode=TwoWay}" ColumnCount="1" RowCount="1">
          <dxmvvm:Interaction.Behaviors>
            <dxdashi:DateNavigatorBehavior />
            <dxmvvm:EventToCommand EventName="SelectedDatesChanged" Command="{Binding OnSecondSelectedDatesChangedCommand}" EventArgsConverter="{StaticResource EventToCommandConverter}" PassEventArgsToCommand="True" />
          </dxmvvm:Interaction.Behaviors>
        </dxe:DateNavigator>
        <dxe:TextEdit EditValue="{Binding SecondValue}" MaskUseAsDisplayFormat="True" MaskType="DateTime" Margin="5,5,5,5">
          <dxmvvm:Interaction.Behaviors>
            <dxmvvm:EventToCommand EventName="EditValueChanged" Command="{Binding OnSecondEditValueChangedCommand}" EventArgsConverter="{StaticResource EventToCommandConverter}" PassEventArgsToCommand="True" />
          </dxmvvm:Interaction.Behaviors>
        </dxe:TextEdit>
        <dx:SimpleButton Content="{dxdashi:DashboardLocalizationString ButtonApply}" HorizontalAlignment="Right" Margin="5,5,5,5">
          <dxmvvm:Interaction.Behaviors>
            <dxmvvm:EventToCommand EventName="Click" Command="{Binding OnApplyButtonClickCommand}" />
          </dxmvvm:Interaction.Behaviors>
        </dx:SimpleButton>
      </StackPanel>
    </StackPanel>
  </DataTemplate>
  <DataTemplate x:Key="{dxdasht:DateFilterItemThemeKey ResourceKey=DatePickerTemplate}">
    <Grid>
      <dx:SplitButton ButtonKind="Toggle" Content="{Binding FilterButtonName}" ArrowGlyph="{dx:SvgImageSource Uri='/DevExpress.Xpf.Dashboard.v24.1;component/Images/Edit.svg'}" IsChecked="{Binding IsDatePickerButtonChecked}" Visibility="{Binding ShowSplitButtonDatePicker}" IsPopupOpen="{Binding ShowCalendars, Mode=TwoWay}" PopupContent="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" PopupContentTemplate="{Binding Path=(dxdash:DateFilterDashboardLayoutItem.DatePickerPopupTemplate), RelativeSource={RelativeSource Mode=Self}}">
        <dxmvvm:Interaction.Behaviors>
          <dxmvvm:EventToCommand EventName="Click" Command="{Binding OnFilterButtonClickCommand}" EventArgsConverter="{StaticResource EventToCommandConverter}" PassEventArgsToCommand="True" />
        </dxmvvm:Interaction.Behaviors>
      </dx:SplitButton>
      <Grid Visibility="{Binding ShowDefaultDatePickerButton}">
        <dx:SimpleButton x:Name="dropDownButton" Content="{dxdashi:DashboardLocalizationString DateFilterDatePickerButtonDefaultText}">
          <dxmvvm:Interaction.Behaviors>
            <dxmvvm:EventToCommand EventName="Click" Command="{Binding OnDropDownButtonClickCommand}" EventArgsConverter="{StaticResource EventToCommandConverter}" PassEventArgsToCommand="True" />
            <dxdashi:ButtonForegroundBehavior />
          </dxmvvm:Interaction.Behaviors>
        </dx:SimpleButton>
        <dxe:FlyoutControl HorizontalAlignment="Left" VerticalAlignment="Center" IsOpen="{Binding ShowCalendarsBeforeFiltering}" PlacementTarget="{Binding ElementName=dropDownButton}" Content="{Binding DataContext, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}" ContentTemplate="{Binding Path=(dxdash:DateFilterDashboardLayoutItem.DatePickerPopupTemplate), RelativeSource={RelativeSource Mode=Self}}">
          <dxmvvm:Interaction.Behaviors>
            <dxmvvm:EventToCommand EventName="Closed" Command="{Binding OnPopupClosedCommand}" />
          </dxmvvm:Interaction.Behaviors>
        </dxe:FlyoutControl>
      </Grid>
    </Grid>
  </DataTemplate>
  <DataTemplate x:Key="{dxdasht:DateFilterItemThemeKey ResourceKey=QuickButtonTemplate}">
    <dx:SimpleButton Content="{Binding Name}" IsChecked="{Binding IsChecked}" MinWidth="{Binding MinWidth, Mode=TwoWay}">
      <dxmvvm:Interaction.Behaviors>
        <dxmvvm:ReadOnlyDependencyPropertyBindingBehavior Binding="{Binding ActualWidth, Mode=OneWayToSource}" DependencyProperty="{x:Static FrameworkElement.ActualWidthProperty}" />
        <dxmvvm:EventToCommand EventName="Click" EventArgsConverter="{StaticResource EventToCommandConverter}" PassEventArgsToCommand="True" Command="{Binding DataContext.OnButtonClickCommand, RelativeSource={RelativeSource AncestorType=dxdash:DateFilterDashboardLayoutItem}}" />
      </dxmvvm:Interaction.Behaviors>
    </dx:SimpleButton>
  </DataTemplate>
  <dxdashi:DateFilterButtonTemplateSelector x:Key="{dxdasht:DateFilterItemThemeKey ResourceKey=QuickButtonTemplateSelector}">
    <dxdashi:DateFilterButtonTemplateSelector.QuickButtonTemplate>
      <DataTemplate>
        <ContentControl ContentTemplate="{Binding Path=(dxdash:DateFilterDashboardLayoutItem.QuickButtonTemplate), RelativeSource={RelativeSource Mode=Self}}" Content="{Binding}" />
      </DataTemplate>
    </dxdashi:DateFilterButtonTemplateSelector.QuickButtonTemplate>
    <dxdashi:DateFilterButtonTemplateSelector.DropDownButtonTemplate>
      <DataTemplate>
        <ContentControl ContentTemplate="{Binding Path=(dxdash:DateFilterDashboardLayoutItem.DatePickerTemplate), RelativeSource={RelativeSource Mode=Self}}" Content="{Binding Context}" />
      </DataTemplate>
    </dxdashi:DateFilterButtonTemplateSelector.DropDownButtonTemplate>
  </dxdashi:DateFilterButtonTemplateSelector>
  <Style x:Key="{dxdasht:DateFilterItemThemeKey ResourceKey=ViewStyle}" TargetType="{x:Type dxlc:FlowLayoutControl}">
    <Setter Property="ItemsSource" Value="{Binding ButtonModels}" />
    <Setter Property="ItemTemplateSelector" Value="{DynamicResource {dxdasht:DateFilterItemThemeKey ResourceKey=QuickButtonTemplateSelector}}" />
    <Setter Property="Orientation" Value="{Binding ButtonsOrientation}" />
    <Setter Property="dxmvvm:Interaction.BehaviorsTemplate">
      <Setter.Value>
        <DataTemplate>
          <ItemsControl>
            <dxdashi:DateFilterPaddingBehavior />
          </ItemsControl>
        </DataTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <DataTemplate x:Key="{dxdasht:DateFilterItemThemeKey ResourceKey=Template}">
    <dxlc:FlowLayoutControl Style="{Binding Path=(dxdash:DateFilterDashboardLayoutItem.ViewStyle), RelativeSource={RelativeSource TemplatedParent}}" />
  </DataTemplate>
</ResourceDictionary>