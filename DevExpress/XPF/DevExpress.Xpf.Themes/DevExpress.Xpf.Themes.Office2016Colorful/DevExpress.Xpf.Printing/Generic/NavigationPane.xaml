<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="http://schemas.devexpress.com/winfx/2008/xaml/printing" xmlns:themes="http://schemas.devexpress.com/winfx/2008/xaml/printing/themekeys" xmlns:native="http://schemas.devexpress.com/winfx/2008/xaml/printing/native" xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm" xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars" xmlns:dxdv="http://schemas.devexpress.com/winfx/2008/xaml/documentviewer" xmlns:sys="clr-namespace:System;assembly=mscorlib" xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid" xmlns:dxet="http://schemas.devexpress.com/winfx/2008/xaml/editors/themekeys" xmlns:dxi="http://schemas.devexpress.com/winfx/2008/xaml/core/internal" xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys" xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys" xmlns:dxpn="http://schemas.devexpress.com/winfx/2008/xaml/printing/native" xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">
  <DataTemplate x:Key="documentMapTemplate">
    <Grid>
      <TextBlock Text="{local:PrintingStringId StringId=NavigationPane_NoBookmarks}" Visibility="{Binding Path=(local:DocumentPreviewControl.ActualViewer).Document.HasBookmarks, RelativeSource={RelativeSource Self}, Converter={dx:BooleanToVisibilityConverter Invert=True}}" />
      <dxpn:DocumentMap x:Name="PART_DocumentMapControl" Visibility="{Binding Path=(local:DocumentPreviewControl.ActualViewer).Document.HasBookmarks, RelativeSource={RelativeSource Self}, Converter={dx:BooleanToVisibilityConverter}}" Settings="{Binding Path=(local:DocumentPreviewControl.ActualViewer).ActualDocumentMapSettings, RelativeSource={RelativeSource TemplatedParent}}">
        <dxpn:DocumentMap.Resources>
          <ControlTemplate x:Key="{dxgt:GridControlThemeKey ResourceKey=BorderTemplate, IsThemeIndependent=True}" TargetType="{x:Type ContentControl}">
            <ContentPresenter x:Name="content" Grid.RowSpan="3" Margin="3" />
          </ControlTemplate>
          <Style x:Key="{dxdst:DefaultStyleThemeKey FullName=http://schemas.devexpress.com/winfx/2008/xaml/grid.OuterBorderElement}" TargetType="{x:Type dxg:OuterBorderElement}">
            <Setter Property="Template" Value="{x:Null}" />
          </Style>
          <SolidColorBrush x:Key="{dxgt:GridRowThemeKey ResourceKey=BorderNoneBrush, IsThemeIndependent=True}" Color="Transparent" />
          <SolidColorBrush x:Key="{dxgt:TreeListViewThemeKey ResourceKey=RowMarginBackgroundBrush, IsThemeIndependent=True}" Color="Transparent" />
          <ControlTemplate x:Key="{dxgt:TableViewThemeKey ResourceKey=DataPresenterTemplate, IsThemeIndependent=True}" TargetType="{x:Type dxg:DataPresenter}">
            <ContentPresenter />
          </ControlTemplate>
        </dxpn:DocumentMap.Resources>
      </dxpn:DocumentMap>
    </Grid>
  </DataTemplate>
  <DataTemplate x:Key="pagesTemplate">
    <dxpn:ThumbnailsViewerControl FilteredPageIndices="{Binding NavigationPaneSearchModel.ResultPageIndices, RelativeSource={RelativeSource AncestorType=local:NavigationPaneControl}}" SelectedPageNumber="{Binding Path=(local:DocumentPreviewControl.ActualViewer).CurrentPageNumber, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Settings="{Binding Path=(local:DocumentPreviewControl.ActualViewer).ThumbnailsSettings, RelativeSource={RelativeSource TemplatedParent}}" />
  </DataTemplate>
  <DataTemplate x:Key="searchResultTemplate">
    <Grid DataContext="{Binding NavigationPaneSearchModel, RelativeSource={RelativeSource AncestorType=local:NavigationPaneControl}}">
      <TextBlock TextWrapping="Wrap">
        <TextBlock.Text>
          <MultiBinding Converter="{native:NavigationPaneSearchResultsStateConverter}">
            <Binding Path="SearchState" />
            <Binding Path="SearchResults.Count" />
            <Binding Path="SearchText" />
          </MultiBinding>
        </TextBlock.Text>
      </TextBlock>
      <dxe:ListBoxEdit ScrollViewer.HorizontalScrollBarVisibility="Disabled" Name="searchResultsList" ShowBorder="False" ItemsSource="{Binding SearchResults}" DisplayMember="Name" EditValue="{Binding SelectedSearchResult, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding Path=(local:DocumentPreviewControl.ActualViewer).Document.IsCreating, Converter={dxmvvm:BooleanNegationConverter}, RelativeSource={RelativeSource Self}, FallbackValue=False}">
        <dxe:ListBoxEdit.ItemTemplate>
          <DataTemplate>
            <Border BorderBrush="#1A727272" BorderThickness="0,0,0,1">
              <TextBlock TextWrapping="Wrap" TextTrimming="CharacterEllipsis" MinHeight="24" MaxHeight="48">
                <dxmvvm:Interaction.Behaviors>
                  <dxpn:TextBlockBindableInlinesBehavior>
                    <dxpn:TextBlockBindableInlinesBehavior.InlineList>
                      <MultiBinding Converter="{native:BrickPagePairToDisplayTextConverter}" ConverterParameter="Backward">
                        <Binding Path="(local:DocumentPreviewControl.ActualViewer).Document.PrintingSystem.Pages" RelativeSource="{RelativeSource TemplatedParent}" />
                        <Binding Path="BrickPagePair" />
                        <Binding Path="NavigationPaneSearchModel.UseCaseSensitiveSearch" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type local:NavigationPaneControl}}" />
                        <Binding Path="NavigationPaneSearchModel.SearchText" RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type local:NavigationPaneControl}}" />
                      </MultiBinding>
                    </dxpn:TextBlockBindableInlinesBehavior.InlineList>
                  </dxpn:TextBlockBindableInlinesBehavior>
                </dxmvvm:Interaction.Behaviors>
              </TextBlock>
            </Border>
          </DataTemplate>
        </dxe:ListBoxEdit.ItemTemplate>
        <dxe:ListBoxEdit.ItemsPanel>
          <ItemsPanelTemplate>
            <DockPanel VerticalAlignment="Top" />
          </ItemsPanelTemplate>
        </dxe:ListBoxEdit.ItemsPanel>
        <dxe:ListBoxEdit.ItemContainerStyle>
          <Style x:Key="{dxdst:DefaultStyleThemeKey FullName=http://schemas.devexpress.com/winfx/2008/xaml/editors.ListBoxEditItem}" TargetType="{x:Type dxe:ListBoxEditItem}">
            <Setter Property="DockPanel.Dock" Value="Top" />
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="ToolTip">
              <Setter.Value>
                <ToolTip MaxWidth="200">
                  <TextBlock TextTrimming="CharacterEllipsis" Text="{Binding Converter={native:SearchDataToLocationTextConverter}}" TextWrapping="Wrap" />
                </ToolTip>
              </Setter.Value>
            </Setter>
          </Style>
        </dxe:ListBoxEdit.ItemContainerStyle>
        <dxmvvm:Interaction.Behaviors>
          <dxmvvm:EventToCommand EventName="EditValueChanged" PassEventArgsToCommand="True" EventArgsConverter="{native:EditValueChangedEventArgsSelectedItemConverter}" Command="{Binding Path=(local:DocumentPreviewControl.ActualViewer).NavigateCommand, RelativeSource={RelativeSource TemplatedParent}}" />
        </dxmvvm:Interaction.Behaviors>
      </dxe:ListBoxEdit>
    </Grid>
  </DataTemplate>
  <Style TargetType="Button" x:Key="navigationButtonStyle">
    <Setter Property="Padding" Value="0" />
    <Setter Property="Command" Value="{Binding NavigateToNextResultCommand}" />
    <Setter Property="Content" Value="{x:Null}" />
    <Setter Property="Margin" Value="3,0,0,0" />
  </Style>
  <dxpn:NavigationPaneTabTemplateSelector x:Key="tabTemplateSelector" DocumentMapTemplate="{StaticResource documentMapTemplate }" PagesTemplate="{StaticResource pagesTemplate}" SearchResultTemplate="{StaticResource searchResultTemplate}" />
  <DataTemplate x:Key="TabItemNormalBackground">
    <dxi:TabBorder ViewInfo="{Binding}" BorderBrush="Transparent" BorderBackground="Transparent" BorderThickness="0" BorderMargin="0,1" HoldBorderThickness="0" HoldBorderMargin="0" />
  </DataTemplate>
  <DataTemplate x:Key="TabItemHoverBackground">
    <dxi:TabBorder ViewInfo="{Binding}" BorderBrush="Transparent" BorderBackground="Transparent" BorderThickness="0" BorderMargin="0,1" HoldBorderThickness="0" HoldBorderMargin="0" />
  </DataTemplate>
  <DataTemplate x:Key="TabItemSelectedBackground">
    <dxi:TabBorder ViewInfo="{Binding}" BorderBrush="{Binding Path=(TextElement.Foreground), RelativeSource={RelativeSource Self}}" BorderBackground="Transparent" BorderThickness="0,0,0,0" BorderMargin="0,1" HoldBorderThickness="0" HoldBorderMargin="0" />
  </DataTemplate>
  <DataTemplate x:Key="TabItemFocusedBackground" />
  <DataTemplate x:Key="TabControlBackground">
    <dxi:TabBorder ViewInfo="{Binding}" BorderBrush="Transparent" BorderThickness="0" BorderBackground="Transparent" />
  </DataTemplate>
  <ControlTemplate x:Key="{themes:NavigationPaneThemeKey ResourceKey=Template}" TargetType="{x:Type local:NavigationPaneControl}">
    <Grid Grid.Column="0">
      <Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="auto" />
        <RowDefinition />
      </Grid.RowDefinitions>
      <dxe:ButtonEdit Margin="0,0,0,4" Name="PART_SearchBox" NullText="{local:PrintingStringId StringId=NavigationPane_SearchBoxPlaceholder}" AllowNullInput="True" ShowNullText="True" AllowDefaultButton="False" EditValue="{Binding NavigationPaneSearchModel.SearchText, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
        <dxe:ButtonEdit.Buttons>
          <dxe:ButtonInfo GlyphKind="Cancel" Command="{Binding Path=(dxe:BaseEdit.OwnerEdit).SetNullValueCommand, RelativeSource={RelativeSource Self}}" Visibility="{Binding NavigationPaneSearchModel.SearchText, Converter={dxmvvm:ObjectToBooleanConverter}, RelativeSource={RelativeSource TemplatedParent}}" />
          <dxe:ButtonInfo GlyphKind="DropDown" Margin="1,0,0,0">
            <dxe:ButtonInfo.Template>
              <DataTemplate>
                <ToggleButton x:Name="PART_Item" IsChecked="{Binding IsChecked, Mode=TwoWay}" Style="{DynamicResource {dxet:ButtonsThemeKey ResourceKey=ButtonStyle}}">
                  <dxb:BarManager.DXContextMenu>
                    <dxb:PopupMenu DataContext="{Binding NavigationPaneSearchModel, RelativeSource={RelativeSource AncestorType={x:Type local:NavigationPaneControl}}}" IsOpen="{Binding PlacementTarget.IsChecked, RelativeSource={RelativeSource Self}}">
                      <dxb:BarCheckItem Content="{dxdv:DocumentViewerControlLocalizedString FindControlCaseSensitive}" CloseSubMenuOnClick="False" IsChecked="{Binding UseCaseSensitiveSearch, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                      <dxb:BarCheckItem Content="{dxdv:DocumentViewerControlLocalizedString FindControlWholeWordsOnly}" CloseSubMenuOnClick="False" IsChecked="{Binding SearchWholeWords, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </dxb:PopupMenu>
                  </dxb:BarManager.DXContextMenu>
                </ToggleButton>
              </DataTemplate>
            </dxe:ButtonInfo.Template>
          </dxe:ButtonInfo>
        </dxe:ButtonEdit.Buttons>
      </dxe:ButtonEdit>
      <Grid Grid.Row="1" Margin="0,0,0,8" DataContext="{TemplateBinding NavigationPaneSearchModel}" Visibility="{Binding NavigationPaneSearchModel.SearchState, RelativeSource={RelativeSource TemplatedParent}, Converter={native:NavigationPaneSearchStateToVisibilityConverter}}">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="auto" />
          <ColumnDefinition Width="auto" />
        </Grid.ColumnDefinitions>
        <TextBlock>
          <TextBlock.Text>
            <MultiBinding Converter="{native:NavigationPaneSearchStateConverter}">
              <Binding Path="SearchState" />
              <Binding Path="SearchResults.Count" />
              <Binding Path="SelectedSearchResultIndex" />
            </MultiBinding>
          </TextBlock.Text>
        </TextBlock>
        <Button Grid.Column="1" Style="{StaticResource navigationButtonStyle}" CommandParameter="Backward" ContentTemplate="{DynamicResource {dxet:ButtonsThemeKey ResourceKey=UpGlyph}}" />
        <Button Grid.Column="2" Style="{StaticResource navigationButtonStyle}" CommandParameter="Forward" ContentTemplate="{DynamicResource {dxet:ButtonsThemeKey ResourceKey=DownGlyph}}" />
      </Grid>
      <dx:DXTabControl TabContentCacheMode="CacheTabsOnSelecting" Grid.Row="2" ClipToBounds="True" SelectedItem="{Binding NavigationPaneSettings.ActiveTab, RelativeSource={RelativeSource TemplatedParent}}" Padding="0,4,0,0" ItemHeaderTemplate="{DynamicResource ResourceKey={themes:NavigationPaneThemeKey ResourceKey=TabHeaderTemplate}}" ItemTemplateSelector="{StaticResource tabTemplateSelector}" BackgroundTemplate="{StaticResource TabControlBackground}">
        <dx:DXTabControl.Resources>
          <Style x:Key="{dxt:DXTabControlThemeKey ResourceKey=PanelContainerStyle, IsThemeIndependent=True}" TargetType="{x:Type dxi:TabPanelContainer}">
            <Setter Property="NormalMargin" Value="{native:NavigationPaneTabPanelMarginExtension}" />
            <!--<Setter Property="NormalPadding" Value="0,2,0,2"/>
                        <Setter Property="HoldMargin" Value="0,0,-1,0" />
                        <Setter Property="HoldPadding" Value="0,0,0,0"/>-->
          </Style>
        </dx:DXTabControl.Resources>
        <dx:DXTabControl.ItemsSource>
          <MultiBinding Converter="{native:NavigationPaneTabItemsSourceConverter}">
            <Binding Path="NavigationPaneSettings.ShowDocumentMapTab" RelativeSource="{RelativeSource TemplatedParent}" />
            <Binding Path="NavigationPaneSettings.ShowPagesTab" RelativeSource="{RelativeSource TemplatedParent}" />
          </MultiBinding>
        </dx:DXTabControl.ItemsSource>
        <dx:DXTabControl.ItemContainerStyle>
          <Style x:Key="{dxdst:DefaultStyleThemeKey FullName=http://schemas.devexpress.com/winfx/2008/xaml/core.DXTabItem}" TargetType="dx:DXTabItem">
            <Setter Property="Padding" Value="0,3,0,0" />
            <Setter Property="FocusedBackgroundTemplate" Value="{StaticResource TabItemFocusedBackground}" />
            <Setter Property="HoverBackgroundTemplate" Value="{StaticResource TabItemHoverBackground}" />
            <Setter Property="NormalBackgroundTemplate" Value="{StaticResource TabItemNormalBackground}" />
            <Setter Property="SelectedBackgroundTemplate" Value="{StaticResource TabItemSelectedBackground}" />
            <Style.Triggers>
              <Trigger Property="IsSelected" Value="True">
                <Setter Property="TextElement.FontWeight" Value="Bold" />
              </Trigger>
            </Style.Triggers>
          </Style>
        </dx:DXTabControl.ItemContainerStyle>
        <dx:DXTabControl.View>
          <dx:TabControlScrollView ScrollButtonShowMode="Never" ScrollButtonsShowMode="Never" />
        </dx:DXTabControl.View>
      </dx:DXTabControl>
    </Grid>
  </ControlTemplate>
  <Style x:Key="{dxdst:DefaultStyleThemeKey FullName=DevExpress.Xpf.Printing.NavigationPaneControl}" TargetType="{x:Type local:NavigationPaneControl}">
    <Setter Property="NavigationPaneSettings" Value="{Binding Path=(local:DocumentPreviewControl.ActualViewer).ActualNavigationPaneSettings, RelativeSource={RelativeSource TemplatedParent}}" />
    <Setter Property="Template" Value="{DynamicResource {themes:NavigationPaneThemeKey ResourceKey=Template}}" />
  </Style>
</ResourceDictionary>