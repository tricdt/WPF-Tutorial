<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                    xmlns:dxdst="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <dxdst:ResourceDictionaryEx Source="/DevExpress.Xpf.Themes.DXStyle.v24.1;component/DevExpress.Xpf.Core/DevExpress.Xpf.Core/Themes/StandardControls/Brushes.xaml"/>
        <dxdst:ResourceDictionaryEx Source="/DevExpress.Xpf.Themes.DXStyle.v24.1;component/DevExpress.Xpf.Core/DevExpress.Xpf.Core/Themes/StandardControls/SharedResources.xaml"/>
        <dxdst:ResourceDictionaryEx Source="/DevExpress.Xpf.Themes.DXStyle.v24.1;component/DevExpress.Xpf.Core/DevExpress.Xpf.Core/Themes/StandardControls/TextBox.xaml"/>
        <dxdst:ResourceDictionaryEx Source="/DevExpress.Xpf.Themes.DXStyle.v24.1;component/DevExpress.Xpf.Core/DevExpress.Xpf.Core/Themes/StandardControls/ComboBoxItem.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <Style x:Key="ComboBoxReadonlyToggleButton" TargetType="{x:Type ToggleButton}"/>

    <Style x:Key="ComboBoxEditableTextBox" TargetType="{x:Type TextBox}"/>

    <dx:NegationConverter x:Key="negationConverter"/>

    <ControlTemplate x:Key="ComboBoxEditableTemplate" TargetType="{x:Type ComboBox}"/>

    <Style x:Key="ComboBoxToggleButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Foreground" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Grid x:Name="Root"
                          Background="Transparent"
                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="17"/>
                        </Grid.ColumnDefinitions>
                        <Grid Grid.Column="1" Margin="1">
                            <Border x:Name="DefaultState"/>
                            <Border x:Name="HoverState"
                                    Background="{StaticResource ComboBox.ToggleButton.HoverState.Border1}"
                                    Opacity="0">
                                <Border Background="{StaticResource ComboBox.ToggleButton.HoverState.Border3}"
                                        BorderBrush="{StaticResource ComboBox.ToggleButton.HoverState.Border2}"
                                        BorderThickness="1"
                                        Margin="1,0,0,0"/>
                            </Border>
                            <Border x:Name="PressedState"
                                    Background="{StaticResource ComboBox.ToggleButton.PressedState.Border1}"
                                    Opacity="0">
                                <Border Background="{StaticResource ComboBox.ToggleButton.PressedState.Border3}"
                                        BorderBrush="{StaticResource ComboBox.ToggleButton.PressedState.Border2}"
                                        BorderThickness="1,1,1,0"
                                        Margin="1,0,0,0"/>
                            </Border>
                            <Border x:Name="DisabledState"
                                    Background="{StaticResource ComboBox.ToggleButton.DisabledState.Border2}"
                                    BorderBrush="{StaticResource ComboBox.ToggleButton.DisabledState.Border1}"
                                    BorderThickness="1"
                                    Margin="1,0,0,0"
                                    Opacity="0"/>
                            <Grid Height="3"
                                  HorizontalAlignment="Center"
                                  Margin="1,0,0,0"
                                  VerticalAlignment="Center"
                                  Width="6">
                                <Path Data="{StaticResource ComboBoxDownArrowGeometry}"
                                      Fill="#3FFFFFFF"
                                      Stretch="Fill"/>
                                <Path x:Name="Glyph"
                                      Data="{StaticResource ComboBoxDownArrowGeometry}"
                                      Fill="{StaticResource ComboBox.Path.DefaultState}"
                                      Stretch="Fill"/>
                            </Grid>
                        </Grid>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Opacity"
                                    TargetName="HoverState"
                                    Value="1"/>
                            <Setter Property="Opacity"
                                    TargetName="PressedState"
                                    Value="0"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Opacity"
                                    TargetName="HoverState"
                                    Value="0"/>
                            <Setter Property="Opacity"
                                    TargetName="PressedState"
                                    Value="1"/>
                        </Trigger>
                        <Trigger Property="ToggleButton.IsChecked" Value="True">
                            <Setter Property="Opacity"
                                    TargetName="HoverState"
                                    Value="0"/>
                            <Setter Property="Opacity"
                                    TargetName="PressedState"
                                    Value="1"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity"
                                    TargetName="HoverState"
                                    Value="0"/>
                            <Setter Property="Opacity"
                                    TargetName="PressedState"
                                    Value="0"/>
                            <Setter Property="Opacity"
                                    TargetName="DisabledState"
                                    Value="1"/>
                            <Setter Property="Fill"
                                    TargetName="Glyph"
                                    Value="{StaticResource ComboBox.Path.DisabledState}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground" Value="{StaticResource Text.DisabledState.Foreground}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <ControlTemplate x:Key="ComboBox_ReadOnlyTemplate" TargetType="{x:Type ComboBox}">
        <Grid x:Name="Root" SnapsToDevicePixels="True">
            <Popup x:Name="PART_Popup"
                   AllowsTransparency="True"
                   IsOpen="{TemplateBinding IsDropDownOpen}"
                   Margin="-12"
                   MaxHeight="{TemplateBinding MaxDropDownHeight}"
                   Placement="Bottom">
                <Grid x:Name="PopupGrid"
                      Margin="12"
                      MaxHeight="{TemplateBinding MaxDropDownHeight}"
                      MinWidth="{Binding ActualWidth, ElementName=Root}">
                    <Border x:Name="ShadowBorder"
                            Background="White"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch">
                        <Border.Effect>
                            <DropShadowEffect x:Name="Shadow"
                                              BlurRadius="3"
                                              Direction="270"
                                              Opacity="0.35"
                                              ShadowDepth="1"/>
                        </Border.Effect>
                    </Border>
                    <Border x:Name="DropDownBorder"
                            Background="{StaticResource ComboBox.DropDownBorder.Background}"
                            BorderBrush="{StaticResource ComboBox.DropDownBorder.BorderBrush}"
                            BorderThickness="1">
                        <ScrollViewer x:Name="DropDownScrollViewer">
                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                <Canvas Height="0"
                                        HorizontalAlignment="Left"
                                        VerticalAlignment="Top"
                                        Width="0">
                                    <Rectangle x:Name="OpaqueRect"
                                               Fill="{Binding Background, ElementName=DropDownBorder}"
                                               Height="{Binding ActualHeight, ElementName=DropDownBorder}"
                                               Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                </Canvas>
                                <ItemsPresenter x:Name="ItemsPresenter"
                                                KeyboardNavigation.DirectionalNavigation="Contained"
                                                Margin="1"
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </Popup>
            <Grid x:Name="TextBox" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                <Border x:Name="DefaultState"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="1"/>
                <Border x:Name="HoverState"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{StaticResource TextBox.HoverState.BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="1"
                        Opacity="0"/>
                <Rectangle x:Name="FocusState"
                           Opacity="0"
                           Style="{StaticResource TextBoxFocusTemplate}"/>
                <ContentPresenter x:Name="content"
                                  Content="{TemplateBinding SelectionBoxItem}"
                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                  ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                  IsHitTestVisible="False"
                                  Margin="{TemplateBinding Padding}"
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            </Grid>
            <ToggleButton x:Name="DropDownButton"
                          Focusable="False"
                          IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                          Style="{StaticResource ComboBoxToggleButton}"/>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity"
                        TargetName="TextBox"
                        Value="0.35"/>
            </Trigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsMouseOver" Value="True"/>
                    <Condition Property="IsFocused" Value="False"/>
                </MultiTrigger.Conditions>
                <Setter Property="Opacity"
                        TargetName="DefaultState"
                        Value="0"/>
                <Setter Property="Opacity"
                        TargetName="HoverState"
                        Value="1"/>
            </MultiTrigger>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="Opacity"
                        TargetName="DefaultState"
                        Value="0"/>
                <Setter Property="Opacity"
                        TargetName="HoverState"
                        Value="1"/>
                <Setter Property="Opacity"
                        TargetName="FocusState"
                        Value="0.25"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <Style x:Key="{dxdst:DefaultStyleThemeKey FullName=System.Windows.Controls.ComboBox}" TargetType="{x:Type ComboBox}">
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="Foreground" Value="{StaticResource Text.Foreground}"/>
        <Setter Property="Background" Value="{StaticResource TextBox.Background}"/>
        <Setter Property="BorderBrush" Value="{StaticResource TextBox.BorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="Padding" Value="2,3,20,3"/>
        <Setter Property="ItemContainerStyle" Value="{StaticResource ComboBoxItemStyle}"/>
        <Setter Property="ScrollViewer.CanContentScroll" Value="True"/>
        <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBox}">
                    <Grid x:Name="Root" SnapsToDevicePixels="True">
                        <Popup x:Name="PART_Popup"
                               AllowsTransparency="True"
                               IsOpen="{TemplateBinding IsDropDownOpen}"
                               Margin="-12"
                               MaxHeight="{TemplateBinding MaxDropDownHeight}"
                               Placement="Bottom">
                            <Grid x:Name="PopupGrid"
                                  Margin="12"
                                  MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                  MinWidth="{Binding ActualWidth, ElementName=Root}">
                                <Border x:Name="ShadowBorder"
                                        Background="White"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch">
                                    <Border.Effect>
                                        <DropShadowEffect x:Name="Shadow"
                                                          BlurRadius="3"
                                                          Direction="270"
                                                          Opacity="0.35"
                                                          ShadowDepth="1"/>
                                    </Border.Effect>
                                </Border>
                                <Border x:Name="DropDownBorder"
                                        Background="{StaticResource ComboBox.DropDownBorder.Background}"
                                        BorderBrush="{StaticResource ComboBox.DropDownBorder.BorderBrush}"
                                        BorderThickness="1">
                                    <ScrollViewer x:Name="DropDownScrollViewer">
                                        <Grid RenderOptions.ClearTypeHint="Enabled">
                                            <Canvas Height="0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    Width="0">
                                                <Rectangle x:Name="OpaqueRect"
                                                           Fill="{Binding Background, ElementName=DropDownBorder}"
                                                           Height="{Binding ActualHeight, ElementName=DropDownBorder}"
                                                           Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                            </Canvas>
                                            <ItemsPresenter x:Name="ItemsPresenter"
                                                            KeyboardNavigation.DirectionalNavigation="Contained"
                                                            Margin="1"
                                                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </Grid>
                                    </ScrollViewer>
                                </Border>
                            </Grid>
                        </Popup>
                        <TextBox x:Name="PART_EditableTextBox"
                                 Background="{TemplateBinding Background}"
                                 BorderBrush="{TemplateBinding BorderBrush}"
                                 BorderThickness="{TemplateBinding BorderThickness}"
                                 Padding="{TemplateBinding Padding}"
                                 Style="{StaticResource {dxdst:DefaultStyleThemeKey FullName=System.Windows.Controls.TextBox}}"
                                 Text="{TemplateBinding SelectionBoxItem}">
                        </TextBox>
                        <Grid x:Name="FocusState" Opacity="0">
                            <Rectangle Style="{StaticResource TextBoxFocusTemplate}"/>
                        </Grid>
                        <ToggleButton x:Name="DropDownButton"
                                      Focusable="False"
                                      HorizontalAlignment="Right"
                                      IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                      Style="{StaticResource ComboBoxToggleButton}"
                                      Width="17"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasDropShadow"
                                 SourceName="PART_Popup"
                                 Value="True">
                            <Setter Property="Effect" TargetName="ShadowBorder">
                                <Setter.Value>
                                    <DropShadowEffect Opacity="0.25"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="BorderBrush"
                                    TargetName="PART_EditableTextBox"
                                    Value="{StaticResource TextBox.HoverState.BorderBrush}"/>
                        </Trigger>
                        <Trigger Property="HasItems" Value="False">
                            <Setter Property="Height"
                                    TargetName="DropDownBorder"
                                    Value="95"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="IsEnabled"
                                    TargetName="PART_EditableTextBox"
                                    Value="False"/>
                            <Setter Property="IsEnabled"
                                    TargetName="DropDownButton"
                                    Value="False"/>
                        </Trigger>
                        <Trigger Property="IsFocused" Value="True">
                            <Setter Property="BorderBrush"
                                    TargetName="PART_EditableTextBox"
                                    Value="{StaticResource TextBox.HoverState.BorderBrush}"/>
                            <Setter Property="Opacity"
                                    TargetName="FocusState"
                                    Value="1"/>
                        </Trigger>
                        <Trigger Property="IsGrouping" Value="True">
                            <Setter Property="ScrollViewer.CanContentScroll" Value="False"/>
                        </Trigger>
                        <Trigger Property="ScrollViewer.CanContentScroll"
                                 SourceName="DropDownScrollViewer"
                                 Value="False">
                            <Setter Property="Canvas.Top"
                                    TargetName="OpaqueRect"
                                    Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                            <Setter Property="Canvas.Left"
                                    TargetName="OpaqueRect"
                                    Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsEditable" Value="False">
                <Setter Property="Template" Value="{StaticResource ComboBox_ReadOnlyTemplate}"/>
                <Setter Property="Padding" Value="5,3,23,3"/>
            </Trigger>
        </Style.Triggers>
    </Style>

</ResourceDictionary>